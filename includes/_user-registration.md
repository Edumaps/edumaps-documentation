

## Registration

<aside class="endpoint">
        <code>POST</code> /signup
</aside>

The **signup** endpoint allows users to register for access to the Edumaps service.

This includes access to the main application, the API and any other services that may be deployed in future.


> ### <code class="response">CURL</code> Request

```bash
# This is the call to authenticate a user
curl "<-- endpoint here -->/auth/local"
        -H "Accept: application/json"
        -H "Content-Type: application/json"
        -d "email: <-- user's email address -->"
        -d "password: <-- user's password -->"
```

<aside class="request">Request</aside>

### Payload Options


  | Required | Description
- | -------- | -----------
`email` | <code class="required"></code> | Registered user's email address
`password` | <code class="required"></code> | Registered user's password
`redirect` |  | If provided the acivation link sent to the user will contain a success redirect url that redirects the user to after successful activation


> ### <code class="response">201</code> Response

```json
{
        "activationEmailSent": true,
        "data": {
                "_id": "<-- user id -->",
                "username": "<-- user email address -->",
                "email": "<-- user email address -->",
                "updatedAt": "2016-08-05T08:18:51.612Z",
                "createdAt": "2016-08-05T08:18:51.612Z",
                "belongsTo": [... <-- array of organisation domains that user is associated to -->],
                "integrations": [... <-- array of services that user has enabled -->]
                ...
        }
}
```

<aside class="response">Response</aside>

An expected successful response should result in a **`201`** header response. The JSON response body will contain the following properties (only some are listed).

### Response Properties

 | Type | Description
-------- | ---- | -----------
`activationEmailSent` | **Boolean** | Confirmation that an activation email has been forwarded to the registered user
`data._id` | **String** | The ID of the newly registered user
`data.username` | **String** | The username of the user. **This is currently automatically assigned the email address**
`data.email` | **String** | The email address registered
`data.belongsTo` | **[Object]** | An array of organisations that the user belongs to containing a `domain` and `domainId` key
`data.integrations` | **[Object]** | An array of services/integrations that the user is able to access or has enabled. This lists out the ....


## Activation

<aside class="endpoint">
        <code>POST</code> /activate
</aside>

The **activate** endpoint will allow users to activate their account after registration. This is _**required**_ to gain access to the Edumaps API and Application.

<aside class="warning text">Note: This endpoint url is dynamic and almost always generated by the API. You should not have a need for this endpoint</aside>

> ### <code class="response">CURL</code> Request

```bash
curl -X GET <-- endpoint here -->/activate?token=<-- token here -->
```

> Remember to replace `<-- token here -->` with your own token

<aside class="request">Request</aside>

### Query Options


  | Required | Description
- | -------- | -----------
`token` | <code class="required"></code> | Required to activate the user account. This will be found in the activation email
`redirect` |  | If provided the acivation will redirect to the page upon success otherwise a JSON of the user object is outputted instead


> ### <code class="response">201</code> Response

```json
{
        "_id": "<-- user id -->",
        "username": "<-- user email address -->",
        "email": "<-- user email address -->",
        "updatedAt": "2016-08-05T08:18:51.612Z",
        "createdAt": "2016-08-05T08:18:51.612Z",
        "belongsTo": [... <-- array of organisation domains that user is associated to -->],
        "integrations": [... <-- array of services that user has enabled -->]
        ...
}
```

> Above is the output for a successful user activation if no redirect parameter is provided

<aside class="response">Response</aside>

A JSON is outputted or a redirect happens depending on the passed in parameters within the URL GET request



